---
layout: default
title: Conferences
weight: 4
permalink: /conferences/
---


<!-- <div id="chart" style="min-width: 310px; height: 400px; margin: 0 auto"> </div> -->
<!-- <canvas id="deadlineChart" width="400" height="200"></canvas> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script> -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script
    src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.2"></script>

<style>
    .conference-body {
        font-family: Arial, sans-serif;
        margin: 20px;
        text-align: right;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
    }

    .container {
        /*            display: flex;*/
        /*            flex-direction: column;*/
        align-items: center;
    }

    .chart-container {
        margin-bottom: 20px;
    }

    /*       canvas {
            border: 1px solid #ccc;
        }*/

    table {
        width: 60%;
        border-collapse: collapse;
        margin: 0 auto;

    }

    th,
    td {
        padding: 12px;
        border-bottom: 1px solid #ddd;
    }

    th {
        background-color: #f2f2f2;
    }

    tr:hover {
        background-color: #f5f5f5;
    }

    .deadline-column {
        text-align: center;
        font-weight: 500;
    }

    .remaining-days-column {
        text-align: right;
        font-weight: bold;
    }

    .urgency-high {
        color: #dc3545 !important;
        /* Red */
    }

    .urgency-medium {
        color: #fd7e14 !important;
        /* Orange */
    }

    .urgency-low {
        color: #28a745 !important;
        /* Green */
    }

    .fa-calendar-alt,
    .fa-clock,
    .fa-calendar-day {
        margin-right: 6px;
    }

    .chart-title {
        text-align: center;
        font-size: 2rem;
        font-weight: 800;
        margin-bottom: 2rem;
        color: #1a1a1a;
    }

    .url-column {
        text-align: center;
    }

    .fa-external-link-alt {
        margin-right: 6px;
    }
</style>


<div class="container-fluid conference-body">
    <div class="row">
        <div class="col-lg-12">
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-body">
                    <h2 class="chart-title text-center mb-4">Upcoming Deadlines</h2>
                    <div class="chart-container" style="position: relative; height:50vh; width:100%; margin: auto;">
                        <canvas id="deadlineChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="card shadow-sm border-0">
                <div class="card-header bg-white border-0">
                    <h2 class="chart-title text-center mb-0">Conference Table</h2>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table id="conferenceTable" class="table table-striped table-hover mb-0">
                            <thead class="thead-light">
                                <tr>
                                    <th scope="col" class="border-top-0">
                                        <i class="fas fa-calendar-alt text-primary"></i> Conference
                                    </th>
                                    <th scope="col" class="deadline-column border-top-0">
                                        <i class="fas fa-calendar-day text-danger"></i> Deadline
                                    </th>
                                    <th scope="col" class="remaining-days-column border-top-0 text-right">
                                        <i class="far fa-clock text-warning"></i> Remaining
                                    </th>
                                    <th scope="col" class="url-column border-top-0 text-center">
                                        <i class="fas fa-cog text-muted"></i> Actions
                                    </th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
    // Function to calculate remaining days
    function calculateRemainingDays(deadlines) {
        const today = new Date();
        return deadlines.map(deadline => Math.ceil((new Date(deadline) - today) / (1000 * 60 * 60 * 24)));
    }

    // Fetch data.json and create the chart and table
    fetch('/data.json')
        .then(response => response.json())
        .then(jsonData => {
            const currentDate = new Date();
            const upcomingConferences = jsonData.filter(conference => new Date(conference.deadline) >= currentDate);

            const conferenceNames = upcomingConferences.map(conference => conference.name);
            const conferenceDeadlines = upcomingConferences.map(conference => conference.deadline);
            const conferenceUrls = upcomingConferences.map(conference => conference.url);


            const remainingDays = calculateRemainingDays(conferenceDeadlines);
            const minRemainingDays = Math.min(...remainingDays);

            // Generate unique colors for the data points
            const colors = ['#EC7D31', '#36BDCB', '#A8385D', '#007D34', '#F6768E', '#6A0DAD', '#34888C'];

            // Sort conferences based on remaining days (ascending order)
            const sortedData = upcomingConferences.slice().sort((a, b) => new Date(a.deadline) - new Date(b.deadline));
            const sortedConferenceNames = sortedData.map(conference => conference.name);
            const sortedConferenceDeadlines = sortedData.map(conference => conference.deadline);
            const sortedRemainingDays = calculateRemainingDays(sortedConferenceDeadlines);
            const sortedConferenceUrls = sortedData.map(conference => conference.url);


            const ctx = document.getElementById('deadlineChart').getContext('2d');
            const deadlineChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        data: sortedData.map((conference, index) => ({
                            x: new Date(conference.deadline),
                            y: sortedRemainingDays[index], // Update the y value to represent the remaining days
                            backgroundColor: colors[index % colors.length], // Assign unique color to the data point
                            borderColor: colors[index % colors.length],
                            pointRadius: 6,
                            hitRadius: 15,
                            label: conference.name, // Add the conference name as a label
                            url: sortedConferenceUrls[index], // Store the URL for each data point
                        })),
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'day',
                                displayFormats: {
                                    day: 'MMM dd'
                                }
                            },
                            min: new Date(), // Set the minimum value of the x-axis to today's date
                            title: {
                                display: true,
                                text: 'Conference Deadline',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            },
                            title: {
                                display: true,
                                text: 'Remaining Days',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: context => context.dataset.data[context.dataIndex].label
                            }
                        },
                        annotation: {
                            annotations: []
                        }
                    }
                }
            });

            // Populate the table with conference information
            const tableBody = document.querySelector('#conferenceTable tbody');
            for (let i = 0; i < sortedData.length; i++) {
                const conf = sortedData[i];
                const row = document.createElement('tr');

                const urgencyClass = sortedRemainingDays[i] <= 7 ? 'urgency-high' : (sortedRemainingDays[i] <= 30 ? 'urgency-medium' : 'urgency-low');

                row.innerHTML = `
                    <td><strong>${conf.name}</strong></td>
                    <td class="deadline-column text-muted">${new Date(conf.deadline).toLocaleDateString()}</td>
                    <td class="remaining-days-column ${urgencyClass}">${sortedRemainingDays[i]} days</td>
                    <td class="url-column">
                        <div class="btn-group">
                            <a href="${conf.url}" target="_blank" class="btn btn-sm btn-outline-info" title="Visit Website">
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                            <button onclick="downloadICS('${conf.name}', '${conf.deadline}', '${conf.url}')" class="btn btn-sm btn-outline-secondary" title="Add to Calendar">
                                <i class="fas fa-calendar-plus"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            }
        })
        .catch(error => console.error('Error fetching data:', error));

    function downloadICS(name, dateStr, url) {
        const date = new Date(dateStr);
        const y = date.getFullYear();
        const m = String(date.getMonth() + 1).padStart(2, '0');
        const d = String(date.getDate()).padStart(2, '0');

        const icsContent = [
            'BEGIN:VCALENDAR',
            'VERSION:2.0',
            'BEGIN:VEVENT',
            `SUMMARY:${name} Deadline`,
            `DTSTART:${y}${m}${d}T000000Z`,
            `DTEND:${y}${m}${d}T235959Z`,
            `DESCRIPTION:Deadline for ${name}. Visit: ${url}`,
            'END:VEVENT',
            'END:VCALENDAR'
        ].join('\n');

        const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8;' });
        const link = document.createElement('a');
        link.href = window.URL.createObjectURL(blob);
        link.setAttribute('download', `${name}_deadline.ics`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
</script>

<!-- // const colors = remainingDays.map(days => (days === minRemainingDays ? 'rgba(75, 192, 192, 0.8)' : 'rgba(192, 75, 75, 0.8)')); -->